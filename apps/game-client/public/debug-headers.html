<!DOCTYPE html>
<html>
<head>
    <title>Security Headers Debug</title>
    <style>
        body { font-family: monospace; max-width: 800px; margin: 0 auto; padding: 20px; }
        .header { margin-bottom: 10px; border-bottom: 1px solid #eee; padding-bottom: 5px; }
        .key { font-weight: bold; }
        .value { color: #0066cc; }
        #results { background: #f5f5f5; padding: 15px; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>Security Headers Debug</h1>
    <p>This page displays all security headers sent by the server.</p>
    
    <div id="results">Loading headers information...</div>

    <script>
        // Function to get all response headers
        async function getHeaders() {
            try {
                const response = await fetch(window.location.href);
                const headers = response.headers;
                let headersList = '';
                
                // Convert headers to array and sort
                const headersArray = Array.from(headers.entries()).sort();
                
                for (const [key, value] of headersArray) {
                    headersList += `<div class="header"><span class="key">${key}:</span> <span class="value">${value}</span></div>`;
                }
                
                document.getElementById('results').innerHTML = headersList;
            } catch (error) {
                document.getElementById('results').innerHTML = `Error fetching headers: ${error.message}`;
            }
        }

        // Add CORS check
        function checkCorsBlocking() {
            const corsDiv = document.createElement('div');
            corsDiv.id = 'cors-test';
            corsDiv.innerHTML = '<h2>CORS Test Results</h2>';
            document.body.appendChild(corsDiv);
            
            // Test Vercel Live
            const vercelImg = document.createElement('img');
            vercelImg.src = 'https://vercel.live/favicon.ico';
            vercelImg.style.width = '1px';
            vercelImg.style.height = '1px';
            vercelImg.onerror = () => {
                document.getElementById('cors-test').innerHTML += '<p style="color:red">❌ vercel.live resources are blocked</p>';
            };
            vercelImg.onload = () => {
                document.getElementById('cors-test').innerHTML += '<p style="color:green">✅ vercel.live resources can load</p>';
            };
            document.body.appendChild(vercelImg);
        }

        // Run on page load
        window.onload = function() {
            getHeaders();
            setTimeout(checkCorsBlocking, 1000);
        };
    </script>
</body>
</html> 